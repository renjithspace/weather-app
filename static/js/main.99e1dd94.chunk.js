(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{129:function(e,t,a){e.exports={root:"NavigateButton_root__1Gv5z"}},133:function(e,t,a){e.exports={root:"ErrorBoundary_root__yxcjt"}},151:function(e,t,a){},281:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),s=a.n(c),i=a(123),o=a(312),u=(a(151),a(27)),l=a.n(u),d=a(135),j=a(40),f=a(309),h=a(30),b=a(3),m=a(4),v=a(85),p=a.n(v),g=a(48),O=a(13),x=a(86),E=a.n(x),F=function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,null,[{key:"dateFromDatetime",value:function(e){return E()(e).format("LL")}},{key:"timeFromDatetime",value:function(e){return E()(e).format("LT")}}]),e}(),y={forecasts:[]};var _={message:null};var C=a(22),A=function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,null,[{key:"segmentsFromForecast",value:function(e,t){return t.filter((function(t){return t.date===e.date}))}},{key:"segmentsFromForecasts",value:function(e,t){var a=e.map((function(e){return e.date}));return t.filter((function(e){return a.includes(e.date)}))}}]),e}(),S={unit:"fahrenheit",pageIndex:0,activeForecastDt:0};var T=Object(g.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REPLACE_APP_FORECASTS":var a=t.forecasts;return y.forecasts=a.map((function(e){return e.date=F.dateFromDatetime(e.dt_txt),e})),Object(O.a)({},y);default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REPLACE_ALERT_MESSAGE":return _.message=t.message,Object(O.a)({},_);case"CLEAR_ALERT_MESSAGE":return _.message=null,Object(O.a)({},_);default:return e}},forecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REPLACE_FORECAST_UNIT":return S.unit=t.unit,Object(O.a)({},S);case"INCREMENT_FORECAST_PAGE_INDEX":return S.pageIndex=S.pageIndex+1,Object(O.a)({},S);case"DECREMENT_FORECAST_PAGE_INDEX":return S.pageIndex=S.pageIndex-1,Object(O.a)({},S);case"REPLACE_FORECAST_ACTIVE_FORECAST_DT":return S.activeForecastDt=t.dt,Object(O.a)({},S);default:return e}}}),w=Object(g.c)(T),k=function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,null,[{key:"pushMessage",value:function(e){w.dispatch({type:"REPLACE_ALERT_MESSAGE",message:e})}},{key:"clearMessage",value:function(){w.dispatch({type:"CLEAR_ALERT_MESSAGE"})}}]),e}(),R=function(){function e(){Object(b.a)(this,e),this.source=void 0,this.source=p.a.CancelToken.source(),this.cancel=this.cancel.bind(this)}return Object(m.a)(e,[{key:"cancel",value:function(){this.source.cancel()}},{key:"get",value:function(){var e=Object(j.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.response,r=n?n.data.message:e.t0.message,k.pushMessage(r);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),D=function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,null,[{key:"list",value:function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.openweathermap.org/data/2.5/forecast","75f972b80e26f14fe6c920aa6a85ad57","Munich,de",40,t="".concat("https://api.openweathermap.org/data/2.5/forecast","?q=").concat("Munich,de","&APPID=").concat("75f972b80e26f14fe6c920aa6a85ad57","&cnt=").concat(40,"&units=imperial"),a=new R,e.next=8,a.get(t);case 8:return n=e.sent,r=n?n.list:[],e.abrupt("return",[r,a.cancel]);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"iconImage",value:function(e){return"http://openweathermap.org/img/wn/".concat(e,".png")}}]),e}(),I=a(314),L=a(282),P=a.p+"static/media/loading.a6877337.svg",N=a(87),M=a.n(N),U=a(2);function G(){return Object(U.jsx)("div",{className:M.a.root,children:Object(U.jsxs)(I.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(U.jsx)("img",{className:M.a.loader,src:P,alt:"Four bubbles bouncing"}),Object(U.jsxs)(I.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(U.jsx)(L.a,{variant:"h6",align:"center",children:"Loading..."}),Object(U.jsx)(L.a,{color:"textSecondary",align:"center",children:"Please wait. We are collecting latest weather data."})]})]})})}var B=a(302),W=a(283),z=a(303),q=a(316);function X(e){function t(t){var a=t.target.value;e.onChange(a)}function a(t){return e.unit===t}return Object(U.jsx)(B.a,{container:!0,justify:"center",children:Object(U.jsx)(B.a,{item:!0,xs:10,sm:6,children:Object(U.jsx)(I.a,{my:4,children:Object(U.jsx)(W.a,{"data-testid":"unitSwitch",children:Object(U.jsxs)(B.a,{container:!0,justify:"center",spacing:2,children:[Object(U.jsx)(B.a,{item:!0,children:Object(U.jsx)(z.a,{name:"unit",value:"celsius",checked:a("celsius"),control:Object(U.jsx)(q.a,{onChange:t}),label:"Celsius","data-testid":"celsiusUnit"})}),Object(U.jsx)(B.a,{item:!0,children:Object(U.jsx)(z.a,{name:"unit",value:"fahrenheit",checked:a("fahrenheit"),control:Object(U.jsx)(q.a,{onChange:t}),label:"Fahrenheit","data-testid":"fahrenheitUnit"})})]})})})})})}var H=Object(n.memo)(X),V=a(304),J=a(305),Y=function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,null,[{key:"fahrenheitToCelsius",value:function(e){return 5/9*(e-32)}},{key:"convertToUnit",value:function(e,t){var a="fahrenheit"===t?e:this.fahrenheitToCelsius(e);return Object(C.round)(a)}},{key:"withUnit",value:function(e,t){return"".concat(e," ").concat({fahrenheit:"\u2109",celsius:"\u2103"}[t])}},{key:"averageForecastTemp",value:function(e,t){var a=e.main,n=(a.temp_min+a.temp_max)/2;return this.convertToUnit(n,t)}},{key:"averageSegmentTemp",value:function(e,t){var a=this,n=e.reduce((function(e,n){return e+a.averageForecastTemp(n,t)}),0),r=Object(C.round)(n/e.length);return this.withUnit(r,t)}}]),e}(),K=a(89),Q=a.n(K);function Z(e){var t=e.forecast,a=e.unit,n=e.activeForecastDt,r=t.weather[0],c=D.iconImage(r.icon),s=F.dateFromDatetime(t.dt_txt),i=Y.averageSegmentTemp(e.segments,a),o=t.dt===n?4:1;return Object(U.jsx)(B.a,{item:!0,xs:12,sm:4,children:Object(U.jsx)(V.a,{className:Q.a.card,elevation:o,onClick:function(){e.onClick(t.dt)},"data-testid":"weatherCard",children:Object(U.jsxs)(J.a,{children:[Object(U.jsx)(L.a,{variant:"h6",color:"secondary",children:i}),Object(U.jsx)(L.a,{variant:"h6",children:r.main}),Object(U.jsx)(L.a,{color:"textSecondary",children:r.description}),Object(U.jsx)("img",{className:Q.a.icon,src:c,alt:"Current weather icon"}),Object(U.jsx)(L.a,{variant:"subtitle2",children:s})]})})})}var $=a(306),ee=a(307),te=a(129),ae=a.n(te);function ne(e){var t="button".concat(Object(C.capitalize)(e.direction)),a="previous"===e.direction?$.a:ee.a;return Object(U.jsx)(W.a,{className:ae.a.root,onClick:function(){e.onNavigate(e.direction)},"data-testid":t,children:Object(U.jsx)(I.a,{p:1,children:Object(U.jsx)(a,{})})})}function re(e){var t=e.navigators,a=!t.includes("previous")&&t.includes("next")?"flex-end":"space-between",n=t.map((function(t){return Object(U.jsx)(B.a,{item:!0,children:Object(U.jsx)(ne,{direction:t,onNavigate:e.onNavigate})},t)}));return Object(U.jsx)(B.a,{container:!0,justify:"center",children:Object(U.jsx)(B.a,{item:!0,xs:8,children:Object(U.jsx)(I.a,{mb:3,children:Object(U.jsx)(B.a,{container:!0,justify:a,children:n})})})})}var ce=Object(n.memo)(re,C.isEqual);function se(e){return Object(U.jsxs)(I.a,{"data-testid":"weatherCarousel",children:[Object(U.jsx)(ce,{onNavigate:e.onNavigate,navigators:e.navigators}),Object(U.jsx)(B.a,{container:!0,spacing:3,children:e.forecasts.map((function(t){var a=A.segmentsFromForecast(t,e.segments);return Object(U.jsx)(Z,{forecast:t,segments:a,unit:e.unit,activeForecastDt:e.activeForecastDt,onClick:e.onSelect},t.dt)}))})]})}var ie=a(132),oe=a(134),ue=function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,null,[{key:"weatherChart",value:function(e){var t=e.forecast,a=e.segments,n=e.unit,r=e.theme,c=t?F.dateFromDatetime(t.dt_txt):"";return{data:{labels:a.map((function(e){return F.timeFromDatetime(e.dt_txt)})),datasets:[{label:"Temperature",data:a.map((function(e){return Y.averageForecastTemp(e,n)})),backgroundColor:r.palette.secondary.main}]},options:{responsive:!0,plugins:{tooltip:{callbacks:{label:function(e){var t=e.dataset,a=e.formattedValue,r=Y.withUnit(a,n);return"".concat(t.label,": ").concat(r)}}},legend:{labels:{font:{family:r.typography.fontFamily}}},title:{display:!0,text:c,font:{family:r.typography.fontFamily,size:15,weight:"500"}}},scales:{xAxes:{grid:{display:!1,drawBorder:!1}},yAxes:{angleLines:{display:!1},grid:{display:!1,drawBorder:!1}}}}}}}]),e}();function le(e){var t={forecast:e.forecast,segments:e.segments,unit:e.unit,theme:Object(ie.a)()},a=ue.weatherChart(t),n=a.data,r=a.options;return Object(U.jsx)(B.a,{container:!0,children:Object(U.jsx)(B.a,{item:!0,xs:12,children:Object(U.jsx)(I.a,{my:3,children:Object(U.jsx)(V.a,{"data-testid":"weatherChart",children:Object(U.jsx)(J.a,{children:Object(U.jsx)(I.a,{children:Object(U.jsx)(oe.a,{type:"bar",data:n,options:r})})})})})})})}var de=Object(n.memo)(le,C.isEqual);var je=Object(h.b)((function(e,t){var a=e.forecast,n={get dailyForecasts(){return Object(C.uniqBy)(t.forecasts,"date")},get activeForecasts(){var e=a.pageIndex;return this.dailyForecasts.splice(e,3)},get activeForecastsSegments(){return A.segmentsFromForecasts(this.activeForecasts,t.forecasts)},get carouselNavigators(){var e=[],t=a.pageIndex>0,n=this.dailyForecasts[a.pageIndex+3];return t&&e.push("previous"),n&&e.push("next"),e},get activeForecast(){var e=a.activeForecastDt;return this.dailyForecasts.find((function(t){return t.dt===e}))||null},get activeForecastSegments(){return this.activeForecast?A.segmentsFromForecast(this.activeForecast,t.forecasts):[]}};return Object(O.a)(Object(O.a)({},a),n)}),{replaceUnit:function(e){return{type:"REPLACE_FORECAST_UNIT",unit:e}},incrementPageIndex:function(){return{type:"INCREMENT_FORECAST_PAGE_INDEX"}},decrementPageIndex:function(){return{type:"DECREMENT_FORECAST_PAGE_INDEX"}},replaceActiveForecastDt:function(e){return{type:"REPLACE_FORECAST_ACTIVE_FORECAST_DT",dt:e}}})((function(e){var t=e.activeForecast&&Object(U.jsx)(de,{forecast:e.activeForecast,segments:e.activeForecastSegments,unit:e.unit}),a=Object(n.useCallback)((function(t){e.replaceUnit(t)}),[e.replaceUnit]),r=Object(n.useCallback)((function(t){"next"===t?e.incrementPageIndex():e.decrementPageIndex()}),[e.incrementPageIndex,e.decrementPageIndex]);return Object(n.useEffect)((function(){!function(){var t=e.forecasts[0].dt;e.replaceActiveForecastDt(t)}()}),[]),Object(U.jsxs)(n.Fragment,{children:[Object(U.jsx)(H,{unit:e.unit,onChange:a}),Object(U.jsx)(se,{forecasts:e.activeForecasts,segments:e.activeForecastsSegments,unit:e.unit,navigators:e.carouselNavigators,activeForecastDt:e.activeForecastDt,onNavigate:r,onSelect:function(t){e.replaceActiveForecastDt(t)}}),t]})})),fe=a(317),he=a(315),be=a(308);var me=Object(h.b)((function(e){var t=e.alert,a={isOpen:Boolean(e.alert.message)};return Object(O.a)(Object(O.a)({},t),a)}),{replaceMessage:function(e){return{type:"REPLACE_ALERT_MESSAGE",message:e}},clearMessage:function(){return{type:"CLEAR_ALERT_MESSAGE"}}})((function(e){function t(){e.clearMessage()}return Object(U.jsx)(fe.a,{open:e.isOpen,message:e.message,autoHideDuration:6e3,action:Object(U.jsx)(he.a,{size:"small","aria-label":"close",color:"inherit",onClick:t,children:Object(U.jsx)(be.a,{fontSize:"small"})}),onClose:t,"data-testid":"alert"})}));var ve=Object(h.b)((function(e){var t=e.app,a={hasForecasts:Boolean(t.forecasts[0])};return Object(O.a)(Object(O.a)({},t),a)}),{replaceForecasts:function(e){return{type:"REPLACE_APP_FORECASTS",forecasts:e}}})((function(e){var t=e.hasForecasts?Object(U.jsx)(je,{forecasts:e.forecasts}):Object(U.jsx)(G,{}),a=null;function r(){return(r=Object(j.a)(l.a.mark((function t(){var n,r,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.list();case 2:n=t.sent,r=Object(d.a)(n,2),c=r[0],s=r[1],a=s,c&&e.replaceForecasts(c);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){r.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){return function(){a&&a()}})),Object(U.jsxs)(f.a,{maxWidth:"md",children:[t,Object(U.jsx)(me,{})]})})),pe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,319)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},ge=a(311),Oe=a(310),xe=Object(Oe.a)({typography:{fontFamily:"Inter, sans-serif"}});function Ee(e){return Object(U.jsx)(h.a,{store:w,children:Object(U.jsx)(ge.a,{theme:xe,children:e.children})})}var Fe=a(10),ye=a(9),_e=a(133),Ce=a.n(_e),Ae=function(e){Object(Fe.a)(a,e);var t=Object(ye.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={message:null},n}return Object(m.a)(a,[{key:"render",value:function(){return this.state.message?Object(U.jsx)("div",{className:Ce.a.root,children:Object(U.jsxs)(I.a,{children:[Object(U.jsx)(L.a,{variant:"h6",children:"Something went wrong!"}),Object(U.jsx)(L.a,{color:"textSecondary",children:this.state.message})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{message:e.message}}}]),a}(n.Component);Object(i.install)(),s.a.render(Object(U.jsx)(r.a.StrictMode,{children:Object(U.jsxs)(Ae,{children:[Object(U.jsx)(Ee,{children:Object(U.jsx)(ve,{})}),Object(U.jsx)(o.a,{})]})}),document.getElementById("root")),pe()},87:function(e,t,a){e.exports={root:"Loading_root__eDfFn",loader:"Loading_loader__fHWHo"}},89:function(e,t,a){e.exports={card:"Weather_card__1i1vW",icon:"Weather_icon__16LAY"}}},[[281,1,2]]]);
//# sourceMappingURL=main.99e1dd94.chunk.js.map